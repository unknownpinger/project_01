{
    "m1":"aW1wb3J0IGtleWJvYXJkCmltcG9ydCB0aW1lCmZyb20gZGlzY29yZHdlYmhvb2sgaW1wb3J0IERpc2NvcmQKaW1wb3J0IGRpc2NvcmQKY29uZGl0aW9uID0gInRydWUiCmRlZiBkaWUoKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAga2V5Ym9hcmQuc2VuZCgiYWx0K0Y0LCBzcGFjZSIpCgpUT0tFTiA9ICdPRFF3T1RZeU5qQTVNelk0TWpZNE9ESXcuWUpmMWRnLlE1Z0dVM2N3UWVjV2E2QmgwdFFoN04yQUFOaycKY2xpZW50ID0gZGlzY29yZC5DbGllbnQoKQp0aW1lLnNsZWVwKDEwKQp3aGlsZSBUcnVlOgogICAgaWYgY29uZGl0aW9uID09ICJ0cnVlIjoKICAgICAgICBkaXNjb3JkID0gRGlzY29yZCgKICAgICAgICAgICAgdXJsPSJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy84NDA5NTg2MjQ3NDIxMTMyOTAvY3NQTF9LdURhd1l2ZEMtSC0xRVhqb0FCOU0xMVUzQmNjZnhpNFF4b2JoM2tJbXZXWU1XZlBtN3ViU1RxNHUtSjNKNEsiKQogICAgICAgIGRpc2NvcmQucG9zdChjb250ZW50PSJ0YXJnZXQgbWFjaGluZSBpcyBvbmxpbmUsIHBsZWFzZSBpc3N1ZSB5b3VyIGNvbW1hbmRzIikKCgogICAgICAgIEBjbGllbnQuZXZlbnQKICAgICAgICBhc3luYyBkZWYgb25fcmVhZHkoKToKICAgICAgICAgICAgcHJpbnQoJ1dlIGhhdmUgbG9nZ2VkIGluIGFzIHswLnVzZXJ9Jy5mb3JtYXQoY2xpZW50KSkKCgogICAgICAgIEBjbGllbnQuZXZlbnQKICAgICAgICBhc3luYyBkZWYgb25fbWVzc2FnZShtZXNzYWdlKToKICAgICAgICAgICAgdXNlcm5hbWUgPSBzdHIobWVzc2FnZS5hdXRob3IpLnNwbGl0KCcjJylbMF0KICAgICAgICAgICAgdXNlcl9tZXNzYWdlID0gc3RyKG1lc3NhZ2UuY29udGVudCkKICAgICAgICAgICAgY2hhbm5lbCA9IHN0cihtZXNzYWdlLmNoYW5uZWwubmFtZSkKICAgICAgICAgICAgcHJpbnQoZid7dXNlcm5hbWV9OiB7dXNlcl9tZXNzYWdlfTogKHtjaGFubmVsfSknKQoKICAgICAgICAgICAgaWYgbWVzc2FnZS5hdXRob3IgPT0gY2xpZW50LnVzZXI6CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgIGlmIG1lc3NhZ2UuY2hhbm5lbC5uYW1lID09ICd2YWxvcmFudC1ib3QnOgogICAgICAgICAgICAgICAgaWYgdXNlcl9tZXNzYWdlLmxvd2VyKCkgPT0gJ29ubGluZSc6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoZidIZWxsbyB7dXNlcm5hbWV9LCBtYWNoaW5lIGlzIG9ubGluZSByaWdodCBub3cnKQogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgZWxpZiB1c2VyX21lc3NhZ2UubG93ZXIoKSA9PSAna2lsbCB0aGUgcHJvZ3JhbSc6CiAgICAgICAgICAgICAgICAgICAgZXhpdCgpCgogICAgICAgICAgICAgICAgZWxpZiB1c2VyX21lc3NhZ2UubG93ZXIoKSA9PSAnc2h1dCBkb3duJzoKICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmQuc2VuZCgiYWx0K0Y0LCBzcGFjZSIpCgogICAgICAgICAgICAgICAgZWxpZiB1c2VyX21lc3NhZ2UubG93ZXIoKSA9PSAna2lsbCBkZWV6IG51dHMnOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKGYnSGVsbG8ge3VzZXJuYW1lfSwgU1VDSyBNWSBOVVRTJykKICAgICAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgICAgICAgICBlbGlmIHVzZXJfbWVzc2FnZS5sb3dlcigpID09ICdwcmV0dGllc3QgZ2lybCBpbiB0aGUgc2VydmVyJzoKICAgICAgICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmNoYW5uZWwuc2VuZChmJ0hlbGxvIE1JV0lOVCcpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICAgICAgZWxpZiB1c2VyX21lc3NhZ2UubG93ZXIoKSA9PSAnaGVscCc6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoJ0kgYW0gaGVyZSB0byBoZWxwIScpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICAgICAgICAgZWxpZiB1c2VyX21lc3NhZ2UubG93ZXIoKSA9PSAncGFzcyc6CiAgICAgICAgICAgICAgICAgICAgZGllKCkKCgogICAgICAgIGNsaWVudC5ydW4oVE9LRU4p"
}